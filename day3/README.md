# Day 3: `match`, `Option`, `Result`로 안전한 상태 메시지 만들기

**난이도: EASY (부담 없이 즐길 수 있어요!)**

## [전날 과제 요약]
- Day 2에서는 소유권과 빌림 규칙을 토대로 데이터가 중복으로 참조될 때도 안전하게 다루는 연습을 했습니다.
- 테스트 코드로 의도한 동작을 확인하며, 나중에 로직이 바뀌어도 기본 규칙이 깨지지 않도록 습관을 들였습니다.

## [전날 과제로 얻은 역량]
- 값이 이동하거나 빌려질 때 어떤 규칙이 적용되는지 머릿속으로 추적할 수 있게 되었습니다.
- 함수 시그니처를 설계할 때 “누가 소유권을 가져가고, 누가 잠깐 빌릴까?” 를 자연스럽게 생각하게 되었습니다.

## [오늘 과제 목표]
- `match` 표현식으로 여러 경우의 수를 깔끔하게 정리하는 연습을 합니다.
- `Option`과 `Result` 타입이 실무에서 자주 맞닥뜨리는 "값이 없거나 실패한 상황"을 어떻게 표현하는지 체험합니다.
- 아주 작은 예제를 통해 테스트 주도 접근의 기초 감각을 유지합니다.

## [오늘 과제 설명]
이번 과제는 간단한 상태 보고 도우미 함수를 만들면서 `match`, `Option`, `Result`를 익히는 데 집중합니다. 아래 단계를 천천히 따라가 주세요.

1. **새 프로젝트 만들기**  
   `cargo new day3_state_helper --lib` 명령으로 라이브러리 프로젝트를 생성합니다.  
   > 👉 이미 비슷한 프로젝트가 있다면 삭제할 필요 없이 새로운 디렉터리만 만들면 됩니다.

2. **상태를 사람 말로 바꾸는 함수 구현하기** (`src/lib.rs`)
   아래 함수들을 순서대로 작성합니다. 각 함수 위에는 "이 함수가 무엇을 해결하려는지"를 한/영 병기 주석으로 1줄 이상 남겨 주세요. 어린 친구에게 설명하듯이 쉬운 문장을 쓰면 가장 좋습니다.
   - `pub fn describe_sync_height(height: Option<u64>) -> String`
     - `Some(value)`라면 `format!("Current height: {value}")` 문자열을 반환합니다.
     - `None`이라면 "No blocks yet"을 반환합니다.
     - 여기서는 오직 `match`로 분기하도록 연습해 봅니다.
   - `pub fn fallback_slot(slot: Result<u64, String>) -> u64`
     - 성공(`Ok`)이면 값을 그대로 반환합니다.
     - 실패(`Err`)라면 기본 슬롯인 `0`을 반환합니다.
     - 후속 로직이 멈추지 않도록, "실패를 숨기지 않고 안전하게 기본값으로" 전환하는 감각을 익힙니다.
   - `pub fn classify_peer_speed(ms: u64) -> &'static str`
     - 0~150ms: "Instant"
     - 151~400ms: "Acceptable"
     - 401ms 이상: "Lagging"
     - `match` 안에서 범위 패턴(`0..=150` 등)을 직접 사용해 보세요.

3. **테스트로 동작 확인하기** (`tests/status_report.rs`)
   다음을 모두 검증하는 테스트 파일을 만듭니다. 각 테스트 위에도 "왜 이 테스트가 필요한지" 짧은 주석을 적어 주세요.
   - `describe_sync_height`가 `Some`과 `None` 모두에서 기대한 문장을 만드는지.
   - `fallback_slot`이 성공/실패 케이스를 안전하게 처리하는지.
   - `classify_peer_speed`가 경계값(150, 151, 400, 401)을 올바르게 분류하는지.

4. **작은 정리 루틴 연습하기**  
   - `cargo fmt`로 코드 스타일을 정리합니다.  
   - `cargo test`로 모든 동작이 맞는지 확인합니다.  
   - 이 두 명령은 실제 현업에서도 코드를 제출하기 전에 꼭 실행하는 기본 루틴입니다.

5. **학습 일지 공간 남기기**  
   README 마지막에 학습자가 오늘 느낀 점을 자유롭게 적을 수 있는 공간을 남겨 주세요. "오늘의 TIL" 같은 제목이면 더 좋습니다.

## [이해를 돕기 위한 예시]
다음은 `Option`을 `match`로 해석하는 가장 단순한 형태입니다. 오늘 구현할 함수들도 이 흐름을 그대로 확장한 것뿐입니다.

```rust
fn explain_option(value: Option<i32>) -> &'static str {
    match value {
        Some(_) => "There is a number!",  // 값이 있으면 당황할 필요가 없어요.
        None => "It's empty...",          // 값이 없을 때를 직접 다루면 에러가 줄어듭니다.
    }
}
```

- `match`는 모든 경우를 하나씩 나열해야 해서, 놓치는 경우 없이 안전합니다.
- `Option`과 `Result`를 활용하면 "예외 상황"이 숨어 있지 않고 코드 표면으로 드러나, 운영 중 알람을 만들 때 큰 도움이 됩니다.
- 오늘 과제는 블록체인 노드 모니터링이라는 거창한 주제를 아주 작은 조각으로 맛보는 연습이라고 생각하시면 됩니다.

---

### 오늘의 TIL (Today I Learned)
- (학습자가 자유롭게 작성할 공간)
